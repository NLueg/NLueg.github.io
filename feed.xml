<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.4">Jekyll</generator><link href="https://www.nicolueg.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.nicolueg.com/" rel="alternate" type="text/html" /><updated>2020-09-20T14:02:23+02:00</updated><id>https://www.nicolueg.com/feed.xml</id><title type="html">Homepage | Nico Lueg</title><subtitle>My name is Nico Lueg, I am an IT-Consultant and programming enthusiast from Germany.  I want to share my experiences that I made while developing.
</subtitle><author><name>Nico Lueg</name></author><entry><title type="html">Bridge between Java and NodeJs</title><link href="https://www.nicolueg.com/node.js/java/backend/2020/01/26/run-java-with-node.html" rel="alternate" type="text/html" title="Bridge between Java and NodeJs" /><published>2020-01-26T04:33:36+01:00</published><updated>2020-01-26T04:33:36+01:00</updated><id>https://www.nicolueg.com/node.js/java/backend/2020/01/26/run-java-with-node</id><content type="html" xml:base="https://www.nicolueg.com/node.js/java/backend/2020/01/26/run-java-with-node.html">&lt;!-- Introduction: Description of the problem --&gt;
&lt;p&gt;I recently worked on implementing a language-server for the DSL openVALIDATION.
The plan was, to deliver an IDE to simplify the usage of the language.
Because we wanted to implement a web-based IDE we couldn’t avoid using JavaScript or TypeScript for the editor.
We also preferred TypeScript for the implementation of the language-server to be more reusable.
The problem we then had is, that openVALIDATION is written in Java and we don’t want to duplicate the parsing logic to TypeScript.
So we needed to find a way to connect the Java implementation with the TypeScript language-server.&lt;/p&gt;

&lt;p&gt;I will first explain the different ways I tried and will then come to my final solution: writing an own package.&lt;/p&gt;

&lt;h2 id=&quot;different-approaches&quot;&gt;Different Approaches&lt;/h2&gt;

&lt;p&gt;First, we created a REST-API, that the language-server can speak with the parser.
Implementing it in Java wasn’t the problem.
With the implemented REST-API, we can provide several paths for parsing and other required functions.&lt;/p&gt;

&lt;!-- Cloud: too expensive, working offline --&gt;
&lt;p&gt;Then we thought about how to publish the API.
The usage of something like a cloud-based REST-API would lead to very high costs because every text-change of a user would call this Apis.
Also, we wanted the language-server to work independently from the internet for the integration in not web-based IDEs like VSCode.&lt;/p&gt;

&lt;!-- Starting of the REST-API is required, possible with java --&gt;
&lt;p&gt;Because of this, we wanted to deliver the REST-API when the language-server gets installed and run it in a separate process.
This is also not much of a problem if Java is installed.
But openVALIDATION is a no-code development tool so what an editor would it be if it requires a programming-language to work with it?
So this is not an option either.&lt;/p&gt;

&lt;!-- We want to be language-independent --&gt;
&lt;p&gt;My first thought was, that it shouldn’t be such a problem to run a JAR file without Java.
I thought about some programs that wrap the JAR to another format to be executed on any platform.
After some research I found &lt;code class=&quot;highlighter-rouge&quot;&gt;launch4j&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#launch4j&quot;&gt;[1]&lt;/a&gt;.
Launch4j is called a cross-platform tool for wrapping Java applications which sounds like a perfect fit for my needs.&lt;/p&gt;

&lt;!-- Launch4j --&gt;
&lt;p&gt;So I downloaded it and tried it out.
The package works perfectly for wrapping the JAR for windows.
It creates an EXE-File which includes the JAR with an integrated JRE.
But I couldn’t find out, how to wrap a JAR platform-independent.
I discovered, that the ‘cross-platform’ says, that the tool itself can be launched on all platforms and NOT to use the JAR on all platforms.
There are some similar tools for Linux and Mac but this would lead to a large overhead if the package needs to deliver a wrapped JAR for every platform.
That’s why I discarded this idea too.&lt;/p&gt;

&lt;!-- found packages to do so --&gt;
&lt;p&gt;Next, I searched for npm packages that deliver a bridge between JavaScript and Java.
I thought I can’t be the only one having this problem.
And I wasn’t!
Two packages try to solve this problem by downloading the platform-specific JRE while installing the package. 
This is the solution!&lt;/p&gt;

&lt;!-- problems with the packages --&gt;
&lt;p&gt;But I still got a bit of a problem with the packages.
The first package &lt;code class=&quot;highlighter-rouge&quot;&gt;node-jre&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#node-jre&quot;&gt;[2]&lt;/a&gt; uses the official Oracle-JRE which, as far as I know, doesn’t fit to the Oracle license.
The second package &lt;code class=&quot;highlighter-rouge&quot;&gt;njre&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#njre&quot;&gt;[3]&lt;/a&gt; uses the OpenJDK from the &lt;code class=&quot;highlighter-rouge&quot;&gt;AdoptOpenJDK API&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#openJDK&quot;&gt;[4]&lt;/a&gt;.
With this package, I am secured from any licensing problems.
But both packages have a huge disadvantage which comes from the overhead which both packages bring to the dependent project.
The JRE is installed on every platform at any time even though there already is a Java installation on the PC.
Also, the path of the JRE varies on the different platforms because of the folder-structure of OpenJDK.
The dependent project needs to look for the downloaded JRE and run it.
In the end, I couldn’t find a project, that fits my expectations.&lt;/p&gt;

&lt;h2 id=&quot;solution-node-java-connector&quot;&gt;Solution: &lt;code class=&quot;highlighter-rouge&quot;&gt;node-java-connector&lt;/code&gt;&lt;/h2&gt;
&lt;!-- Final solution: download OpenJDK --&gt;
&lt;p&gt;So I decided to build an own package which should work like this:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;When installing the package, the JRE gets downloaded.&lt;/li&gt;
  &lt;li&gt;When a Java version exists on the system, the JRE won’t be downloaded.&lt;/li&gt;
  &lt;li&gt;The OpenJDK JRE should be used to be saved from licensing problems.&lt;/li&gt;
  &lt;li&gt;The package should provide an API for starting a given JAR file that the dependent package doesn’t have to the JRE by itself.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;While implementing it, I oriented myself on the the &lt;code class=&quot;highlighter-rouge&quot;&gt;njre&lt;/code&gt; package.
Also, I used &lt;code class=&quot;highlighter-rouge&quot;&gt;find-java-home&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#findJavaHome&quot;&gt;[5]&lt;/a&gt; to look up, if the platform has Java installed or not.
If not, the JRE gets downloaded in the node-module itself.
This is also different from the other to packages where the JRE gets downloaded in the root folder of the dependent project.
Now you don’t publish the JRE in your package.&lt;/p&gt;

&lt;p&gt;Also a function gets exported, that can be used to run the JAR.
The function itself then handles the finding of the JRE and can take some arguments too.&lt;/p&gt;

&lt;p&gt;I already used the package in two projects in the context of openVALIDATION: &lt;code class=&quot;highlighter-rouge&quot;&gt;openvalidation-npm-cli&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#openvalidationNpm&quot;&gt;[6]&lt;/a&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;openvalidation-languageserver-backend&lt;/code&gt; &lt;a class=&quot;citation&quot; href=&quot;#openvalidationBackend&quot;&gt;[7]&lt;/a&gt;.
The first project wraps the opennvalidation-cli, which is written in Java, as an npm-package.
The second project deals with the problem I explained at the beginning: start the backend for the language-server with JavaScript.&lt;/p&gt;

&lt;p&gt;You can find the package on npm and install it in your project like this:&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;node-java-connector
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You then need to define a new file that should be named like &lt;code class=&quot;highlighter-rouge&quot;&gt;install.js&lt;/code&gt; which calls the &lt;code class=&quot;highlighter-rouge&quot;&gt;install&lt;/code&gt; method inside the package.
This can be written like this:&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;njb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;node-java-connector&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;njb&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;install&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jre&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In your &lt;code class=&quot;highlighter-rouge&quot;&gt;package.json&lt;/code&gt; you then need to define inside the &lt;code class=&quot;highlighter-rouge&quot;&gt;script&lt;/code&gt; tag, that the file should be run while installing your project like this:&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;install&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;node install.js&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This handles the installing of the required JRE.
Now everything is set up and you can run the JAR by calling &lt;code class=&quot;highlighter-rouge&quot;&gt;executeJar&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I would be interested in what you think about this.
Did you already struggle with a similar problem? And what was your solution?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;&lt;/p&gt;
&lt;ol class=&quot;bibliography&quot;&gt;&lt;li&gt;&lt;span id=&quot;launch4j&quot;&gt;[1] G. Kowal, launch4j. http://launch4j.sourceforge.net/.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;node-jre&quot;&gt;[2] tilmankamp, npm: node-jre. https://www.npmjs.com/package/node-jre.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;njre&quot;&gt;[3] R. Thériault, npm: njre. https://www.npmjs.com/package/njre.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;openJDK&quot;&gt;[4] AdoptOpenJDK, AdoptOpenJDK API. https://api.adoptopenjdk.net/.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;findJavaHome&quot;&gt;[5] J. Spencer, npm: find-java-home. https://www.npmjs.com/package/find-java-home.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;openvalidationNpm&quot;&gt;[6] openVALIDATION, npm: openvalidation. https://www.npmjs.com/package/openvalidation.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;openvalidationBackend&quot;&gt;[7] openVALIDATION, npm: openvalidation-languageserver-backend. https://www.npmjs.com/package/openvalidation-languageserver-backend.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;</content><author><name>Nico Lueg</name></author><category term="Node.js" /><category term="Java" /><category term="backend" /><summary type="html">I recently worked on implementing a language-server for the DSL openVALIDATION. The plan was, to deliver an IDE to simplify the usage of the language. Because we wanted to implement a web-based IDE we couldn’t avoid using JavaScript or TypeScript for the editor. We also preferred TypeScript for the implementation of the language-server to be more reusable. The problem we then had is, that openVALIDATION is written in Java and we don’t want to duplicate the parsing logic to TypeScript. So we needed to find a way to connect the Java implementation with the TypeScript language-server.</summary></entry><entry><title type="html">Short overview of the topic of my bachelor-thesis</title><link href="https://www.nicolueg.com/bachelor-thesis/ide/text-editor/openvalidation/2019/09/02/my-current-work.html" rel="alternate" type="text/html" title="Short overview of the topic of my bachelor-thesis" /><published>2019-09-02T05:33:36+02:00</published><updated>2019-09-02T05:33:36+02:00</updated><id>https://www.nicolueg.com/bachelor-thesis/ide/text-editor/openvalidation/2019/09/02/my-current-work</id><content type="html" xml:base="https://www.nicolueg.com/bachelor-thesis/ide/text-editor/openvalidation/2019/09/02/my-current-work.html">&lt;p&gt;In my very first post, I want to write about the topic of my bachelor thesis.
This is just a small overview but I will explain each topic in a separate post.&lt;/p&gt;

&lt;p&gt;In general, I want to implement a text editor for the domain-specific language (DSL) openVALIDATION &lt;a class=&quot;citation&quot; href=&quot;#openVALGitbook&quot;&gt;[1]&lt;/a&gt;.
This is a DSL that can represent validation-rules and is very close to natural-language.
After the definition of a rule, code can be generated in different programming languages.
Currently, code can be generated in the languages C#, Java, JavaScript and Node.js.
The language is quite new and will be published on GitHub soon &lt;a class=&quot;citation&quot; href=&quot;#openVALGithub&quot;&gt;[2]&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The editor for the language should be web-based and Open-Source for strong extensibility and many possibilities to integrate it.
Therefore we use the Language Server Protocol &lt;a class=&quot;citation&quot; href=&quot;#lsp&quot;&gt;[3]&lt;/a&gt; which tries to be an API between multiple language-extensions and text editors.
It’s currently implemented for about 99 languages &lt;a class=&quot;citation&quot; href=&quot;#lspServers&quot;&gt;[4]&lt;/a&gt; and 23 text editors &lt;a class=&quot;citation&quot; href=&quot;#lspTools&quot;&gt;[5]&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The main part of my thesis is the implementation of language-features for openVALIDATION.
After my work, I will publish this also on my &lt;a href=&quot;https://github.com/NLueg&quot;&gt;GitHub&lt;/a&gt; profile, that the extension can be integrated into several editors.&lt;/p&gt;

&lt;p&gt;The main features of this extension will be linting, autocompletion and syntax-highlighting.
Linting is the analysis of code while writing it.
Autocompletion means the providing of symbols. We want to provide context-sensitive autocompletion, where you only show symbols, that are valid in a given context.
Last but not least, syntax-highlighting is the consistent highlighting of words that are in the same group.
Groups are e.g. keywords or methods.&lt;/p&gt;

&lt;p&gt;Autocompletion and syntax-highlighting are a bit of a problem because the language is very close to natural language.
For the autocompletion function, the abstract-syntax-tree (AST) needs to be used and modified to simplify the usage.&lt;/p&gt;

&lt;p&gt;In the future post I want to answer the following questions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;What is the Language Server Protocol?&lt;/li&gt;
  &lt;li&gt;Which web-based Open-Source editor is the most used and accepted one?&lt;/li&gt;
  &lt;li&gt;How does syntax-highlighting work for a natural language?&lt;/li&gt;
  &lt;li&gt;How can context-sensitive code completion work for a natural language?&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;&lt;/p&gt;
&lt;ol class=&quot;bibliography&quot;&gt;&lt;li&gt;&lt;span id=&quot;openVALGitbook&quot;&gt;[1] openvalidation, GitBook: openVALIDATION. https://docs.openvalidation.io.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;openVALGithub&quot;&gt;[2] openvalidation, GitHub: openVALIDATION. https://github.com/openvalidation/openvalidation.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;lsp&quot;&gt;[3] Microsoft, Language Server Protocol. https://microsoft.github.io/language-server-protocol/overview.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;lspServers&quot;&gt;[4] Microsoft, Language Server Protocol - Servers. https://microsoft.github.io/language-server-protocol/implementors/servers/.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span id=&quot;lspTools&quot;&gt;[5] Microsoft, Language Server Protocol - Tools. https://microsoft.github.io/language-server-protocol/implementors/tools/.&lt;br /&gt; &lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;</content><author><name>Nico Lueg</name></author><category term="bachelor-thesis" /><category term="IDE" /><category term="text-editor" /><category term="openVALIDATION" /><summary type="html">In my very first post, I want to write about the topic of my bachelor thesis. This is just a small overview but I will explain each topic in a separate post.</summary></entry></feed>